<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Tumbuhan Cerdas üå±</title>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Comic Neue', cursive; background: #a8e6cf url('game_bg.jpg') no-repeat center center fixed; background-size: cover; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; }
        .game-container { background: rgba(255, 255, 255, 0.95); border-radius: 30px; padding: 30px; box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2); max-width: 550px; width: 90%; text-align: center; border: 8px solid #4CAF50; position: relative; }
        .progress-container { width: 100%; background: #ddd; border-radius: 10px; margin-bottom: 20px; height: 10px; overflow: hidden; }
        .progress-bar { height: 100%; background: #4CAF50; width: 0%; transition: 0.5s; }
        .stats { display: flex; justify-content: space-between; font-weight: bold; margin-bottom: 10px; color: #2e7d32; }
        #question-area { background: #f1f8e9; padding: 20px; border-radius: 15px; font-size: 1.2rem; margin-bottom: 20px; border: 2px dashed #4CAF50; min-height: 60px; display: flex; align-items: center; justify-content: center; }
        .options-container { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .option-button { background: #81c784; color: white; border: none; padding: 15px; border-radius: 15px; font-size: 1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 0 #388e3c; transition: 0.2s; }
        .option-button:disabled { opacity: 0.8; cursor: not-allowed; }
        .correct-blink { background-color: #4CAF50 !important; transform: scale(1.05); }
        .wrong-blink { background-color: #f44336 !important; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; flex-direction: column; justify-content: center; align-items: center; color: white; z-index: 10; text-align: center; }
        .overlay.active { display: flex; }
        .win-animation video { width: 280px; border-radius: 20px; border: 4px solid #ffeb3b; }
        .btn-action { background: #ffc107; color: black; border: none; padding: 15px 30px; border-radius: 50px; font-size: 1.2rem; font-weight: bold; cursor: pointer; margin-top: 20px; box-shadow: 0 5px 0 #ffa000; }
    </style>
</head>
<body>

    <div class="game-container">
        <h1>üå± Tumbuhan Cerdas üå±</h1>
        <div id="start-screen">
            <p>Jawab 10 soal tentang tumbuhan. Nyawamu cuma 3! ‚ù§Ô∏è</p>
            <button class="btn-action" onclick="startGame()">Mulai Game!</button>
        </div>
        <div id="game-screen" style="display: none;">
            <div class="stats">
                <span>Skor: <span id="scoreText">0</span></span>
                <span id="heartsContainer">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
            </div>
            <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
            <div id="question-area"></div>
            <div class="options-container" id="optionsContainer"></div>
        </div>
    </div>

    <div class="overlay" id="winScreen">
        <h2 style="color: #ffeb3b;">LUAR BIASA! üéâ</h2>
        <p>Skor Akhirmu: <span id="finalScore">0</span></p>
        <div class="win-animation">
            <video id="winVideo" loop muted playsinline><source src="winner_character.mp4" type="video/mp4"></video>
        </div>
        <button class="btn-action" onclick="location.reload()">Main Lagi</button>
    </div>

    <div class="overlay" id="loseScreen">
        <h2 style="color: #f44336;">COBA LAGI YUK üò≠</h2>
        <button class="btn-action" onclick="location.reload()">Mulai Ulang</button>
    </div>

    <audio id="bgm" src="bgm_game.m4a" loop preload="auto"></audio>
    <audio id="correctSfx" src="correct_sound.m4a" preload="auto"></audio>
    <audio id="wrongSfx" src="wrong_sound.m4a" preload="auto"></audio>
    <audio id="winSfx" src="win_sound.m4a" preload="auto"></audio>

    <script>
        const questions = [
            { q: "Apa bagian tumbuhan yang menyerap air dari tanah?", a: ["Batang", "Daun", "Akar", "Bunga"], c: 2 },
            { q: "Fotosintesis (memasak makanan) terjadi di...", a: ["Akar", "Biji", "Daun", "Batang"], c: 2 },
            { q: "Zat hijau pada daun disebut?", a: ["Vitamin", "Klorofil", "Oksigen", "Pupuk"], c: 1 },
            { q: "Bagian tumbuhan yang menghasilkan biji adalah...", a: ["Akar", "Bunga", "Daun", "Duri"], c: 1 },
            { q: "Gas yang dihasilkan tumbuhan saat fotosintesis?", a: ["Oksigen", "Karbondioksida", "Nitrogen", "Uap Air"], c: 0 },
            { q: "Singkong menyimpan makanan di bagian...", a: ["Biji", "Daun", "Akar/Umbi", "Bunga"], c: 2 },
            { q: "Pohon mangga memiliki akar jenis...", a: ["Serabut", "Tunggang", "Napas", "Gantung"], c: 1 },
            { q: "Apa yang menyalurkan air dari akar ke daun?", a: ["Bunga", "Batang", "Buah", "Biji"], c: 1 },
            { q: "Tumbuhan pemakan serangga disebut?", a: ["Insektivora", "Herbivora", "Omnivora", "Karnivora"], c: 0 },
            { q: "Putri malu menutup jika...", a: ["Disiram", "Disentuh", "Dipupuk", "Diterangi"], c: 1 }
        ];

        const educationalTips = [
            "Akar berada di bawah tanah untuk menyerap air dan mineral.",
            "Daun adalah tempat tumbuhan memasak makanan (fotosintesis).",
            "Klorofil adalah zat yang memberikan warna hijau pada daun.",
            "Bunga yang cantik bertugas sebagai alat berkembang biak.",
            "Oksigen adalah gas baik yang dihasilkan tumbuhan agar kita bisa bernapas.",
            "Akar singkong membesar karena menyimpan cadangan makanan.",
            "Akar tunggang itu kuat dan besar, biasanya ada di pohon mangga.",
            "Batang itu seperti pipa yang menyalurkan air dari akar ke daun.",
            "Insektivora adalah sebutan untuk tumbuhan pemakan serangga.",
            "Putri Malu menutup daunnya untuk melindungi diri saat disentuh."
        ];

        let currentQ = 0, lives = 3, score = 0;

        function startGame() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            // Paksa browser memuat semua audio
            const bgm = document.getElementById('bgm');
            bgm.play().catch(e => console.log("Audio play blocked"));
            document.getElementById('correctSfx').load();
            document.getElementById('wrongSfx').load();
            document.getElementById('winSfx').load();

            loadQuestion();
        }

        function loadQuestion() {
            const qData = questions[currentQ];
            document.getElementById('question-area').innerText = qData.q;
            document.getElementById('progressBar').style.width = (currentQ / questions.length * 100) + "%";
            const container = document.getElementById('optionsContainer');
            container.innerHTML = "";
            qData.a.forEach((txt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option-button';
                btn.innerText = txt;
                btn.onclick = (e) => checkAnswer(i, e.target);
                container.appendChild(btn);
            });
        }

        function checkAnswer(idx, btnElement) {
            const allBtns = document.querySelectorAll('.option-button');
            allBtns.forEach(b => b.disabled = true);

            if (idx === questions[currentQ].c) {
                btnElement.classList.add('correct-blink');
                const sfx = document.getElementById('correctSfx');
                sfx.currentTime = 0; // Reset ke awal agar suara tidak telat
                sfx.play();
                score += 10;
                document.getElementById('scoreText').innerText = score;
                setTimeout(() => {
                    currentQ++;
                    if (currentQ < questions.length) loadQuestion();
                    else showWin();
                }, 1200);
            } else {
                btnElement.classList.add('wrong-blink');
                const sfx = document.getElementById('wrongSfx');
                sfx.currentTime = 0;
                sfx.play();
                
                alert("üí° Tips: " + educationalTips[currentQ]);
                
                lives--;
                document.getElementById('heartsContainer').innerText = "‚ù§Ô∏è".repeat(lives);
                setTimeout(() => {
                    if (lives <= 0) showLose();
                    else { 
                        allBtns.forEach(b => b.disabled = false); 
                        btnElement.classList.remove('wrong-blink'); 
                    }
                }, 1000);
            }
        }

        function showWin() {
            document.getElementById('bgm').pause();
            const winSfx = document.getElementById('winSfx');
            winSfx.play();
            document.getElementById('finalScore').innerText = score;
            document.getElementById('winScreen').classList.add('active');
            document.getElementById('winVideo').play();
        }

        function showLose() {
            document.getElementById('bgm').pause();
            document.getElementById('loseScreen').classList.add('active');
        }
    </script>
</body>
</html>
